(this["webpackJsonpsd-01-week18-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-01-week18-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/sw_logo2.c6f69db5.png"},,,function(e,t,a){e.exports=a(27)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),p=a.n(r),n=a(10),i=a.n(n),o=(a(22),a(11)),s=a(12),l=a(15),c=a(13),u=a(16),m=a(14),h=a.n(m),d=a(1),b=a(4),f=a(8),y=Object(r.createContext)(),w=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.column,p=a.comparison,n=a.value,i=e?t.filter((function(t){return t.name.toLowerCase().match(e)})):t;switch(p){case"Maior que":return i.filter((function(e){return parseInt(e[r],10)>parseInt(n,10)}));case"Menor que":return i.filter((function(e){return parseInt(e[r],10)<parseInt(n,10)}));case"Igual a":return i.filter((function(e){return parseInt(e[r],10)===parseInt(n,10)}));default:return i}};var k=function(e){var t=e.children,a=Object(r.useState)(""),n=Object(d.a)(a,2),i=n[0],o=n[1],s=Object(r.useState)([]),l=Object(d.a)(s,2),c=l[0],u=l[1],m=Object(r.useState)([]),h=Object(d.a)(m,2),k=h[0],v=h[1],E=Object(r.useState)([{name:i}]),g=Object(d.a)(E,2),j=g[0],O=g[1],C=Object(r.useState)({column:"",comparison:"",value:""}),_=Object(d.a)(C,2),N=_[0],T=_[1],Z=Object(r.useState)({column:"name",order:"ASC"}),F=Object(d.a)(Z,2),S=F[0],x=F[1],I=Object(f.a)(j).slice(1);Object(r.useEffect)((function(){!function(){var e=c;I.length?I.forEach((function(t){var a=t.numericValues;e=w(i,e,a)})):e=w(i,e);var t=S.column,a=S.order;e=function(e,t,a){var r=e.sort((function(e,a){return e[t]-a[t]||e[t].toString().localeCompare(a[t].toString())}));return"DESC"===a?r.reverse():r}(e,t,a),v(e),O([{name:i}].concat(Object(b.a)(I)))}()}),[i,I.length,S]);var D={input:i,setInput:o,filters:j,data:c,setData:u,filteredData:k,setFilteredData:v,setFilters:O,numericFilter:N,setNumericFilter:T,sortColumns:S,setSortColumns:x};return p.a.createElement(y.Provider,{value:D},t)},v=(a(23),function(){var e=Object(r.useContext)(y).setInput;return p.a.createElement("div",{className:"group search-bar"},p.a.createElement("input",{onChange:function(t){var a=t.target.value;return e(a)},id:"search-bar",required:!0}),p.a.createElement("span",{className:"highlight"}),p.a.createElement("span",{className:"bar"}),p.a.createElement("label",{htmlFor:"search-bar"},"Search by planet name"))}),E=(a(24),a(2)),g=a(3),j=function(){var e=Object(r.useContext)(y),t=e.filters,a=e.numericFilter,n=e.setNumericFilter,i=t.map((function(e){return!!e.numericValues&&e.numericValues.column}));return p.a.createElement("div",null,p.a.createElement("span",{className:"selector-label"},"Choose a column:"),p.a.createElement("select",{name:"column","data-testid":"column-selector",onChange:function(e){var t=e.target,r=t.name,p=t.value;return n(Object(g.a)({},a,Object(E.a)({},r,p)))},required:!0},p.a.createElement("option",{value:"",label:" "}),["rotation_period","orbital_period","diameter","surface_water","population"].map((function(e){return!i.includes(e)&&p.a.createElement("option",{value:e,key:e},e.replace("_"," "))}))))},O=function(){var e=Object(r.useContext)(y),t=e.numericFilter,a=e.setNumericFilter;return p.a.createElement("div",null,p.a.createElement("span",{className:"selector-label"},"Choose a comparison:"),p.a.createElement("select",{name:"comparison","data-testid":"comparison-selector",onChange:function(e){var r=e.target,p=r.name,n=r.value;return a(Object(g.a)({},t,Object(E.a)({},p,n)))},required:!0},p.a.createElement("option",{value:"",label:" "}),p.a.createElement("option",{value:"Maior que"},"Maior que"),p.a.createElement("option",{value:"Menor que"},"Menor que"),p.a.createElement("option",{value:"Igual a"},"Igual a")))},C=function(){var e=Object(r.useContext)(y),t=e.numericFilter,a=e.setNumericFilter;return p.a.createElement("div",{className:"group number-selector"},p.a.createElement("input",{type:"number",name:"value",onChange:function(e){var r=e.target,p=r.name,n=r.value;return a(Object(g.a)({},t,Object(E.a)({},p,n)))},required:!0,id:"number-bar"}),p.a.createElement("span",{className:"highlight"}),p.a.createElement("span",{className:"bar"}),p.a.createElement("label",{htmlFor:"number-bar"},"Type a number"))},_=function(){var e=Object(r.useContext)(y).numericFilter,t=e.column,a=e.comparison,n=e.value;return p.a.createElement("input",{type:"submit",value:"Filtrar",className:t&&a&&n?void 0:"filter-button-disabled","data-testid":"filter-button",disabled:!(t&&a&&n)})},N=function(){var e=Object(r.useContext)(y),t=e.filters,a=e.setFilters,n=Object(f.a)(t).slice(1);return p.a.createElement("section",null,n.map((function(e){var r=e.numericValues,i=r.column,o=r.comparison,s=r.value;return p.a.createElement("div",{className:"column-filters",key:i},p.a.createElement("p",{className:"column-filter",name:i},"\u2609 ".concat(i.replace("_"," ")," ").concat(o.toLowerCase()," ").concat(s)),p.a.createElement("button",{type:"button","data-testid":"delete-button",name:i,onClick:function(){!function(e){var r=n.filter((function(t){return t.numericValues.column!==e}));a([t[0]].concat(Object(b.a)(r)))}(i)}},"X"))})))},T=function(){var e=Object(r.useContext)(y),t=e.filters,a=e.numericFilter,n=e.setNumericFilter,i=e.setFilters,o=a.column,s=a.comparison,l=a.value;return p.a.createElement("div",null,p.a.createElement("form",{className:"numericForm",onSubmit:function(e){e.preventDefault(),e.target.reset(),i([].concat(Object(b.a)(t),[{numericValues:{column:o,comparison:s,value:l}}])),n({column:"",comparison:"",value:""})}},p.a.createElement("section",{className:"numeric-section"},p.a.createElement(j,null),p.a.createElement(O,null),p.a.createElement(C,null)),p.a.createElement("section",null,p.a.createElement(_,null))),p.a.createElement(N,null))},Z=(a(25),function(){return fetch("https://swapi-trybe.herokuapp.com/api/planets").then((function(e){return e.json()})).then((function(e){return e}))}),F=function(e){var t=e.currentColumn,a=Object(r.useContext)(y),n=a.sortColumns,i=a.setSortColumns,o=n.order;return p.a.createElement("button",{type:"button","data-testid":"sort-button",className:"sort-button",onClick:function(){i({column:t,order:"DESC"===o?"ASC":"DESC"})}},"\u21f5")},S={results:[{name:"Bespin",rotation_period:"12",orbital_period:"5110",diameter:"118000",climate:"temperate",gravity:"1.5 (surface), 1 standard (Cloud City)",terrain:"gas giant",surface_water:"0",population:"6000000",residents:["https://swapi-trybe.herokuapp.com/api/people/26/"],films:["https://swapi-trybe.herokuapp.com/api/films/2/"],created:"2014-12-10T11:43:55.240000Z",edited:"2014-12-20T20:58:18.427000Z",url:"https://swapi-trybe.herokuapp.com/api/planets/6/"},{name:"Endor",rotation_period:"18",orbital_period:"402",diameter:"4900",climate:"temperate",gravity:"0.85 standard",terrain:"forests, mountains, lakes",surface_water:"8",population:"30000000",residents:["https://swapi-trybe.herokuapp.com/api/people/30/"],films:["https://swapi-trybe.herokuapp.com/api/films/3/"],created:"2014-12-10T11:50:29.349000Z",edited:"2014-12-20T20:58:18.429000Z",url:"https://swapi-trybe.herokuapp.com/api/planets/7/"},{name:"Tatooine",rotation_period:"23",orbital_period:"304",diameter:"10465",climate:"arid",gravity:"1 standard",terrain:"desert",surface_water:"1",population:"200000",residents:["https://swapi-trybe.herokuapp.com/api/people/1/","https://swapi-trybe.herokuapp.com/api/people/2/","https://swapi-trybe.herokuapp.com/api/people/4/","https://swapi-trybe.herokuapp.com/api/people/6/","https://swapi-trybe.herokuapp.com/api/people/7/","https://swapi-trybe.herokuapp.com/api/people/8/","https://swapi-trybe.herokuapp.com/api/people/9/","https://swapi-trybe.herokuapp.com/api/people/11/","https://swapi-trybe.herokuapp.com/api/people/43/","https://swapi-trybe.herokuapp.com/api/people/62/"],films:["https://swapi-trybe.herokuapp.com/api/films/1/","https://swapi-trybe.herokuapp.com/api/films/3/","https://swapi-trybe.herokuapp.com/api/films/4/","https://swapi-trybe.herokuapp.com/api/films/5/","https://swapi-trybe.herokuapp.com/api/films/6/"],created:"2014-12-09T13:50:49.641000Z",edited:"2014-12-20T20:58:18.411000Z",url:"https://swapi-trybe.herokuapp.com/api/planets/1/"},{name:"Hoth",rotation_period:"23",orbital_period:"549",diameter:"7200",climate:"frozen",gravity:"1.1 standard",terrain:"tundra, ice caves, mountain ranges",surface_water:"100",population:"unknown",residents:[],films:["https://swapi-trybe.herokuapp.com/api/films/2/"],created:"2014-12-10T11:39:13.934000Z",edited:"2014-12-20T20:58:18.423000Z",url:"https://swapi-trybe.herokuapp.com/api/planets/4/"},{name:"Dagobah",rotation_period:"23",orbital_period:"341",diameter:"8900",climate:"murky",gravity:"N/A",terrain:"swamp, jungles",surface_water:"8",population:"unknown",residents:[],films:["https://swapi-trybe.herokuapp.com/api/films/2/","https://swapi-trybe.herokuapp.com/api/films/3/","https://swapi-trybe.herokuapp.com/api/films/6/"],created:"2014-12-10T11:42:22.590000Z",edited:"2014-12-20T20:58:18.425000Z",url:"https://swapi-trybe.herokuapp.com/api/planets/5/"},{name:"Yavin IV",rotation_period:"24",orbital_period:"4818",diameter:"10200",climate:"temperate, tropical",gravity:"1 standard",terrain:"jungle, rainforests",surface_water:"8",population:"1000",residents:[],films:["https://swapi-trybe.herokuapp.com/api/films/1/"],created:"2014-12-10T11:37:19.144000Z",edited:"2014-12-20T20:58:18.421000Z",url:"https://swapi-trybe.herokuapp.com/api/planets/3/"},{name:"Coruscant",rotation_period:"24",orbital_period:"368",diameter:"12240",climate:"temperate",gravity:"1 standard",terrain:"cityscape, mountains",surface_water:"unknown",population:"1000000000000",residents:["https://swapi-trybe.herokuapp.com/api/people/34/","https://swapi-trybe.herokuapp.com/api/people/55/","https://swapi-trybe.herokuapp.com/api/people/74/"],films:["https://swapi-trybe.herokuapp.com/api/films/3/","https://swapi-trybe.herokuapp.com/api/films/4/","https://swapi-trybe.herokuapp.com/api/films/5/","https://swapi-trybe.herokuapp.com/api/films/6/"],created:"2014-12-10T11:54:13.921000Z",edited:"2014-12-20T20:58:18.432000Z",url:"https://swapi-trybe.herokuapp.com/api/planets/9/"},{name:"Alderaan",rotation_period:"24",orbital_period:"364",diameter:"12500",climate:"temperate",gravity:"1 standard",terrain:"grasslands, mountains",surface_water:"40",population:"2000000000",residents:["https://swapi-trybe.herokuapp.com/api/people/5/","https://swapi-trybe.herokuapp.com/api/people/68/","https://swapi-trybe.herokuapp.com/api/people/81/"],films:["https://swapi-trybe.herokuapp.com/api/films/1/","https://swapi-trybe.herokuapp.com/api/films/6/"],created:"2014-12-10T11:35:48.479000Z",edited:"2014-12-20T20:58:18.420000Z",url:"https://swapi-trybe.herokuapp.com/api/planets/2/"},{name:"Naboo",rotation_period:"26",orbital_period:"312",diameter:"12120",climate:"temperate",gravity:"1 standard",terrain:"grassy hills, swamps, forests, mountains",surface_water:"12",population:"4500000000",residents:["https://swapi-trybe.herokuapp.com/api/people/3/","https://swapi-trybe.herokuapp.com/api/people/21/","https://swapi-trybe.herokuapp.com/api/people/35/","https://swapi-trybe.herokuapp.com/api/people/36/","https://swapi-trybe.herokuapp.com/api/people/37/","https://swapi-trybe.herokuapp.com/api/people/38/","https://swapi-trybe.herokuapp.com/api/people/39/","https://swapi-trybe.herokuapp.com/api/people/42/","https://swapi-trybe.herokuapp.com/api/people/60/","https://swapi-trybe.herokuapp.com/api/people/61/","https://swapi-trybe.herokuapp.com/api/people/66/"],films:["https://swapi-trybe.herokuapp.com/api/films/3/","https://swapi-trybe.herokuapp.com/api/films/4/","https://swapi-trybe.herokuapp.com/api/films/5/","https://swapi-trybe.herokuapp.com/api/films/6/"],created:"2014-12-10T11:52:31.066000Z",edited:"2014-12-20T20:58:18.430000Z",url:"https://swapi-trybe.herokuapp.com/api/planets/8/"},{name:"Kamino",rotation_period:"27",orbital_period:"463",diameter:"19720",climate:"temperate",gravity:"1 standard",terrain:"ocean",surface_water:"100",population:"1000000000",residents:["https://swapi-trybe.herokuapp.com/api/people/22/","https://swapi-trybe.herokuapp.com/api/people/72/","https://swapi-trybe.herokuapp.com/api/people/73/"],films:["https://swapi-trybe.herokuapp.com/api/films/5/"],created:"2014-12-10T12:45:06.577000Z",edited:"2014-12-20T20:58:18.434000Z",url:"https://swapi-trybe.herokuapp.com/api/planets/10/"}]};var x=function(){var e=Object(r.useContext)(y),t=e.filteredData,a=e.filters,n=e.data,i=e.setData,o=Object(r.useState)(!0),s=Object(d.a)(o,2),l=s[0],c=s[1],u=a[0].name||a[1]?t:n;return Object(r.useEffect)((function(){n.length||Z().then((function(e){var t=e.results;c(!1),i(t.sort((function(e,t){return e.name>t.name?1:-1})))})).catch((function(){c(!1),i(S.results)}))}),[n.length,i]),l?p.a.createElement("div",{className:"spinner","data-testid":"loading"}):"API fora do ar"===n?p.a.createElement("div",{style:{color:"white"}},n):p.a.createElement("section",null,p.a.createElement("section",null,p.a.createElement(v,null)),p.a.createElement("section",null,p.a.createElement(T,null)),p.a.createElement("table",null,function(e){return p.a.createElement("thead",null,p.a.createElement("tr",null,Object.keys(e[0]||[]).map((function(e){return"residents"!==e&&p.a.createElement("th",{key:e,className:"table-head-cell"},e.replace(/_/," ").toUpperCase(),p.a.createElement(F,{currentColumn:e}))}))))}(n),function(e){return p.a.createElement("tbody",null,e.map((function(e){return p.a.createElement("tr",{key:e.name},Object.entries(e).map((function(e){var t=Object(d.a)(e,2),a=t[0],r=t[1];return"residents"!==a&&p.a.createElement("td",{key:r,"data-testid":"planets-infos"},r)})))})))}(u)))},I=(a(26),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return p.a.createElement(k,null,p.a.createElement("div",{className:"background"},p.a.createElement("header",null,p.a.createElement("div",null,p.a.createElement("img",{src:h.a,alt:"star wars logo",className:"sw-logo"})),p.a.createElement("div",null,p.a.createElement("h1",{className:"title"},"PLANETS DATATABLE"))),p.a.createElement("section",null,p.a.createElement(x,null))))}}]),t}(p.a.Component));i.a.render(p.a.createElement(I,null),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.45d7626a.chunk.js.map